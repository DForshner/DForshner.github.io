<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Unit Testing | ~ Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Notes from a .Net user group talk on unit testing.

Ideal Test
Automated
No complex dependencies
Independent of each other.  No sequences!
Describes intention.
Shows you how the code should be used.
W">
<meta property="og:type" content="article">
<meta property="og:title" content="Unit Testing">
<meta property="og:url" content="https://dforshner.github.io/2013/03/02/Testing-Meetup/index.html">
<meta property="og:site_name" content="~ Blog">
<meta property="og:description" content="Notes from a .Net user group talk on unit testing.

Ideal Test
Automated
No complex dependencies
Independent of each other.  No sequences!
Describes intention.
Shows you how the code should be used.
W">
<meta property="og:updated_time" content="2016-04-14T14:56:17.488Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Unit Testing">
<meta name="twitter:description" content="Notes from a .Net user group talk on unit testing.

Ideal Test
Automated
No complex dependencies
Independent of each other.  No sequences!
Describes intention.
Shows you how the code should be used.
W">
  
    <link rel="alternate" href="/atom.xml" title="~ Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/styles.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-75403717-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
	<!-- Site Name Markup -->
	<script type="application/ld+json">
	{
	  "@context" : "http://schema.org",
	  "@type" : "WebSite",
	  "name" : "~ Blog",
	  "alternateName" : "David Forshner&#39;s blog/notebook/bookmarks/random",
	  "url" : "https://dforshner.github.io"
	}
	</script>
	<!-- End Site Name Markup-->


  
  <!-- Google charts-->
  <script type="text/javascript" src="//www.google.com/jsapi"></script>
</head>

<body>
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
		    <li>
				<a class="" href="/index.html">
					<i class="fa fa-home"></i>Home
				</a>
			</li>
        
		    <li>
				<a class="" href="/archives">
					<i class="fa fa-archive"></i>Archives
				</a>
			</li>
        
		    <li>
				<a class="" href="https://github.com/dforshner/">
					<i class="fa fa-github-square"></i>GitHub
				</a>
			</li>
        
		    <li>
				<a class="" href="https://www.linkedin.com/in/dforshner/">
					<i class="fa fa-linkedin-square"></i>LinkedIn
				</a>
			</li>
        
		    <li>
				<a class="" href="/pdfs/Resume.pdf">
					<i class="fa fa-trophy"></i>Resume
				</a>
			</li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
          <li><a href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <div class="container">
	<div class="blog-header">
  
    <p class="lead blog-description">David Forshner&#39;s blog/notebook/bookmarks/random</p>
  
</div>

    <div class="row">
        <div class="col-sm-8 blog-main">
          <article id="post-Testing-Meetup" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h3 class="article-title" itemprop="name">
      Unit Testing
    </h3>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2013/03/02/Testing-Meetup/" class="article-date"><time datetime="2013-03-03T00:00:00.000Z" itemprop="datePublished">13-03-03</time></a>
</div>

    
    

	
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Testing/">Testing</a></li></ul>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>Notes from a .Net user group talk on unit testing.</p>
<ul>
<li>Ideal Test<ul>
<li>Automated</li>
<li>No complex dependencies</li>
<li>Independent of each other.  No sequences!</li>
<li>Describes intention.</li>
<li>Shows you how the code should be used.</li>
<li>Written at the same time or before the code being tested.  Code -&gt; Test -&gt; Code -&gt; Test -&gt; …</li>
<li>No loops, no conditionals</li>
<li>Hide any elaborate setup in a base fixture or private method.</li>
<li>Avoid complex setup &amp; teardown (code smell!)</li>
</ul>
</li>
<li>Obvious Benefits<ul>
<li>Reduce time between code change and bug (test failing).  You want to reduce your feedback loop.</li>
<li>Block regression bugs.</li>
<li>Fewer bugs in next phase.</li>
</ul>
</li>
<li>Hidden Benefit: Exerts design pressures on code<ul>
<li>Avoid the debugger!  If you can’t tell what is wrong from the test maybe you need smaller more focused tests!</li>
<li>Less coupling</li>
<li>Explicit dependencies (elaborate setup is a code smell)</li>
<li>Interface use for dependencies</li>
<li>Keeping tests focused encourages single responsibility</li>
<li>Smaller classes &amp; shorter methods</li>
<li>Enables refactoring -&gt; Readable code</li>
<li>You can gut your classes and refactor legacy code.</li>
</ul>
</li>
<li>What to test<ul>
<li>public methods (use a consumer’s point of view)</li>
<li>pure functions</li>
</ul>
</li>
<li>Clean tests<ul>
<li>Have a standard naming scheme.  Ex: Method_Scenario_Result()</li>
<li>Organise into sections Arrange / Act / Assert (TripleA Style)</li>
<li>Ideally one assert per test</li>
<li>Can you share private setup method over multiple tests?</li>
<li>Can you put shared setup in test initialization method or base class?</li>
</ul>
</li>
<li>Testing styles<ul>
<li>State Verification (Good) - Verify state of the object.  Given these inputs, I expect these outputs.</li>
<li>Behavior Verification (Bad) - Verify calls between SUT and collaborators using mocks.  Test code is coupled to code under test so it tends to be brittle and break whenever you change the code being tested.</li>
</ul>
</li>
<li>Isolation<ul>
<li>Avoid “new”</li>
<li>Dependancy injection (Good)<ul>
<li>Create collaborators outside of SUT and pass in (usually via constructor).</li>
<li>Service container IOC usually used to create dependencies in code.</li>
</ul>
</li>
<li>Service Location (Bad)<ul>
<li>Have to setup global state of singleton factory for each test.</li>
<li>Injecting the container into a parameter and then using it to new up is still a service locator.</li>
</ul>
</li>
<li>Interception Frameworks (Bad)<ul>
<li>Invasive testing that leads to test code that is tightly coupled to code under test.</li>
<li>You lose the benefits of design pressure encouraging interface use and small classes.</li>
<li>“Pointy tool” - Use with extreme caution</li>
</ul>
</li>
</ul>
</li>
<li>Service Containers (IOC container)<ul>
<li>Controls lifecycle of its objects.  Not just a service locator.</li>
<li>Lazy - The first instance is new and the rest are copies.</li>
<li>Being forced to write to interfaces is a design pressure that forces decoupling.</li>
</ul>
</li>
<li>Test Doubles<ul>
<li>Stub (Good) - Just works with minimal behavior.  Null and real objects with fake data are stubs. </li>
<li>Mock (Meh) - Can set expectations and can tell you when they aren’t met.</li>
<li>Fake (Meh) - Behaves like the real thing (more or less).  Created by hand.</li>
<li>Spy (Bad) - Tells you what happened by recording calls and checking what SUT did.  Very brittle.</li>
</ul>
</li>
<li>Mocks design pressure<ul>
<li>Easier to check edge cases</li>
<li>Wrap static methods</li>
<li>Composed - Pressure away from deep inheritance</li>
<li>Uses targeted interfaces</li>
<li>Considers requests.  What kind of supported classes are needed?</li>
<li>One object many interfaces</li>
<li>Start coding anywhere!  Mock out what hasn’t been coded yet.</li>
</ul>
</li>
<li>Mocking pros<ul>
<li>Can record expected calls</li>
<li>Have interface of expected object</li>
<li>Can return expected call values.</li>
<li>Can verify calls have been made.</li>
<li>Fluent API</li>
</ul>
</li>
<li>Mocking cons<ul>
<li>Premature composition</li>
<li>Premature interface injection</li>
</ul>
</li>
</ul>

      
    </div>

    
      

    

    <footer class="article-footer">
      
    </footer>
  </div>
  
    
<ul id="article-nav" class="nav nav-pills nav-justified">
  
  <li role="presentation">
    <a href="/2013/02/28/Odds-Ends-March-2013/" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left pull-left"></i>
      <span class="article-nav-link-title">Odds &amp; Ends - March 2013</span>
    </a>
  </li>
  
  
  <li role="presentation">
    <a href="/2013/03/15/Introduction-to-Meteor-js/" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-link-title">Introduction to Meteor.js</span>
      <i class="fa fa-chevron-right pull-right"></i>
    </a>
  </li>
  
</ul>


  
</article>




        </div>
        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          
  <div class="sidebar-module sidebar-module-inset">
  <h4>Blog Ingredients</h4>
  <p>⅓ notebook ⅓ bookmarks ⅓ random</p>

</div>


  
  <div class="sidebar-module">
    <h4>Currently Reading</h4>
    <ul class="sidebar-module-list">
        
          <li class="sidebar-module-list-item">
			<a class="sidebar-module-list-link" href="https://www.goodreads.com/book/show/17346997-doing-data-science?utm_medium=api&amp;amp;utm_source=blog_book">Doing Data Science</a>
		  </li>
		
          <li class="sidebar-module-list-item">
			<a class="sidebar-module-list-link" href="https://www.goodreads.com/book/show/23463279-designing-data-intensive-applications?utm_medium=api&amp;amp;utm_source=blog_book">Designing Data-Intensive Applications</a>
		  </li>
		
          <li class="sidebar-module-list-item">
			<a class="sidebar-module-list-link" href="https://www.goodreads.com/book/show/25531393-patterns-principles-and-practices-of-domain-driven-design?utm_medium=api&amp;amp;utm_source=blog_book">Patterns Principles and Practices of Domain Driven Design</a>
		  </li>
		
    </ul>
  </div>


  
  <div class="sidebar-module">
    <h4>Tags</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Algorithms/">Algorithms</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Books/">Books</a><span class="sidebar-module-list-count">14</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/C/">C++</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Complexity/">Complexity</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Concurrency/">Concurrency</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Conferences/">Conferences</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Courses/">Courses</a><span class="sidebar-module-list-count">7</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Data-Orientated-Design/">Data Orientated Design</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Data-Science/">Data Science</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Data-Structures/">Data Structures</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Databases/">Databases</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/DevOps/">DevOps</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Distributed-Systems/">Distributed Systems</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ECMAScript/">ECMAScript</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Electronics/">Electronics</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Empirical-Studies/">Empirical Studies</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Exploring/">Exploring</a><span class="sidebar-module-list-count">7</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Failure/">Failure</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Functional-Programming/">Functional Programming</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Game-Engines/">Game Engines</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Gamification/">Gamification</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Interviewing/">Interviewing</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/MOOC/">MOOC</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Meetup/">Meetup</a><span class="sidebar-module-list-count">10</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Natural-Language-Processing/">Natural Language Processing</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Odds-Ends/">Odds & Ends</a><span class="sidebar-module-list-count">15</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Optimization/">Optimization</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Presentations/">Presentations</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Purposeful-Practice/">Purposeful Practice</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Random/">Random</a><span class="sidebar-module-list-count">18</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/React/">React</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Reduction/">Reduction</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Reviews/">Reviews</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Software-Architectures/">Software Architectures</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Software-Development-Practices/">Software Development Practices</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Testing/">Testing</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/User-Experience-Design/">User Experience Design</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Visual-Learning/">Visual Learning</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Web/">Web</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/μReview/">μReview</a><span class="sidebar-module-list-count">15</span></li></ul>
  </div>




        </div>
    </div>
  </div>
  <footer class="blog-footer">
  <div class="container">
    <div id="footer-info" class="inner">
      &copy; 2016 David Forshner<br>
    </div>
  </div>
</footer>

  

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
</body>
</html>
